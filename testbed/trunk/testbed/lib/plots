#!/bin/bash

# load libraries
LIB_PATH="$(dirname $0)/../lib"

source $LIB_PATH/io

plots_generate_index_file()
{
	local dir=$1
	local html=$dir/index.html
	verbose "Generating $html"
	echo "<html><body>" > $html
	for i in $(cd $dir && find -name '*png' | sort -n -t t -k 9,9n)
	do
		local datafile_name=$(echo $i| sed 's/\.png//g').data
		if [[ -f $dir/$datafile_name ]]; then
			debug "data file exist for plot $i, so we link to it"
			echo "<a href='$datafile_name'><img align='center' src='$i' alt='' /></a>" >> $html
		else
			debug "$i don't have data file. Not creating link."
			echo "<img align='center' src='$i' alt='' />" >> $html
		fi
	done
	echo "</html></body>" >> $html
}
